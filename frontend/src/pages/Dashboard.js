import React, {useState,useEffect} from "react";
import 'bootstrap/dist/css/bootstrap.min.css'; 
import { api } from "../api";
import BlogCard from "../components/BlogCard";

export default function Dashboard ({user}){
    const [blogs,setBlogs] = useState([]);

    useEffect(() => {
        let isSubscribed = true;
        const fetchData = async () => {
          const data = await api.getAllblogs();
          if (isSubscribed) {
            setBlogs(data.data);
          }
        };
        fetchData().catch(console.error);
    
        return () => (isSubscribed = false);
      }, []);
    
    return (
        <div className="row max-w-[640px] w-[360px] md:w-[500px] lg:w-[560px] " style = {{margin: "40px auto"}}>
             {blogs.length && blogs.map((post, _index)=>(
                <div key={_index} style = {{marginBottom : "30px"}}>               
                <BlogCard user = {user} post = {post}/> 
                </div>
            ))}
        </div>
    );
}