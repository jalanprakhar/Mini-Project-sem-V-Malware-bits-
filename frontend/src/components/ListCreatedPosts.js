import React, { useEffect,useState } from "react";
import 'bootstrap/dist/css/bootstrap.min.css';
import ProfileCreatedPostCard from './ProfileCreatedPostCard';  
import {Card,Row,Col,Container} from 'react-bootstrap';
import { api } from "../api";

export default function ListCreatedPosts({profile_id} ){
   const [blogs,setBlogs] = useState([]);

   useEffect(() => {
    let isSubscribed = true;
    const fetchData = async () => {
      const data = await api.getUserBlog({user_id:profile_id});
      if (isSubscribed) {
        setBlogs(data.data);
      }
    };
    fetchData().catch(console.error);

    return () => (isSubscribed = false);
  }, []);

    const RenderRows = () =>{
        return (
            <Row>
                 {blogs.map((blog) => {
                return ( 
                    <Col  xs={5} sm={5} md={5} lg={4} className='mt-3'>
                <ProfileCreatedPostCard title = {blog.title} hashes = {blog.hashes} upvotes = {blog.upvotes} />
                    </Col>
                    
                )
            })}
            </Row>
        )
    }
    return(
        <div className = "mt-5">
            <Card className = "border-0">
                <Card.Title  >
                    Created Posts
                </Card.Title>
                <Container className="mt-2">
                    <RenderRows />
                </Container>
            </Card>
        </div>
    )
}

