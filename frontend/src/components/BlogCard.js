import React,{useState,useEffect} from 'react';
import 'bootstrap/dist/css/bootstrap.min.css';  
import {Card} from 'react-bootstrap';
import { Link } from 'react-router-dom';
import { useCookies } from "react-cookie";
import { api } from "../api";
import { propTypes } from 'react-bootstrap/esm/Image';

export default function BlogCard ({post,user}){
    const [cookies, setCookie, removeCookie] = useCookies(["user"]);
    const params = {
        user_id:cookies["UserId"],
        requested_id: post.user_id
      };
      
    const [author, setAuthor] = useState ([]);
    useEffect(() => {
        let isSubscribed = true;
        const fetchData = async () => {
          const data = await api.getSelf(params);
          
          if (isSubscribed) {
            setAuthor(data.data);
          }
          
        };
        fetchData().catch(console.error);
    
        return () => (isSubscribed = false);
      }, []);

    return (
        <div>
            <Card className = "m-3">
                <Card.Body style = {{backgroundColor: "#DDE8F0", padding: "8%"}}> 
                <Card.Text className = "text-right" style = {{fontSize: "6",color: "#018ABD",fontWeight: "650" }}>{author.name}</Card.Text>
                    <Card.Title style = {{color: "#004581",fontWeight: "bold",text:"justify"}} >{post.title}</Card.Title>
                    <Card.Subtitle className="mb-2 text-muted">{post.hashes}</Card.Subtitle>  
                    <Card.Text>
                    {post.content}
                    </Card.Text>
                    <Card.Text style = {{color: "#004581",fontWeight: "600"}}>
                        {post.upvotes} Upvotes
                    </Card.Text>
                    <div className="text-center">
                    <Link to = "/viewpost" state= {{post: post }}
                        
                       className ="btn" style = {{backgroundColor: "#018ABD", color: "white"}}>
                        View Post
                        </Link>
                    </div>
                </Card.Body>
            </Card>
        </div>
    );
}
