import React,{useState,useEffect} from 'react';
import 'bootstrap/dist/css/bootstrap.min.css';  
import {Card} from 'react-bootstrap';
import { Link } from 'react-router-dom';
import { api } from "../api";

export default function BlogCard ({post,user}){
    const author_id = post.user_id;
    const id = user.user_id;
    const [author, setAuthor] = useState ([]);
    useEffect(() => {
        let isSubscribed = true;
        const fetchData = async () => {
          const data = await api.getSingleUser({id,author_id});
          if (isSubscribed) {
            setAuthor(data.data.author);
          }
        };
        fetchData().catch(console.error);
    
        return () => (isSubscribed = false);
      }, []);

    return (
        <div>
            <Card className = "m-3">
                <Card.Body style = {{backgroundColor: "#DDE8F0", padding: "8%"}}> 
                <Card.Text className = "text-right" style = {{fontSize: "6",color: "#018ABD",fontWeight: "650" }}>{author}</Card.Text>
                    <Card.Title style = {{color: "#004581",fontWeight: "bold",text:"justify"}} >{post.title}</Card.Title>
                    <Card.Subtitle className="mb-2 text-muted">{post.hashes}</Card.Subtitle>  
                    <Card.Text>
                    {post.content}
                    </Card.Text>
                    <Card.Text style = {{color: "#004581",fontWeight: "600"}}>
                        {post.upvotes} Upvotes
                    </Card.Text>
                    <div className="text-center">
                    <Link to={{ 
                        pathname: "/viewpost", 
                        state: post
                        }} className ="btn" style = {{backgroundColor: "#018ABD", color: "white"}}>
                        View Post
                        </Link>
                    </div>
                </Card.Body>
            </Card>
        </div>
    );
}
